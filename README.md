# 个性化题目生成系统

## 项目简介

这是一个基于智谱AI大语言模型的个性化题目生成系统，能够根据用户指定的年级、学科、难度和题型自动生成高质量的教育题目。系统提供了友好的用户界面，支持题目生成、PDF导出以及AI智能助手功能，适用于教师备课、学生练习和教育机构题库建设。


## 🌟 功能特点

- **🧠 智能题目生成**：基于智谱AI的GLM-4模型，结合LangChain框架，生成符合教育标准的高质量题目
- **📚 多学科全覆盖**：支持数学、英语、科学等多个学科的题目生成
- **📝 多种题型支持**：包括选择题、判断题和简答题等多种题型
- **🎯 难度精准控制**：提供简单、中等、困难三个难度等级，满足不同学习阶段需求
- **🎨 现代化用户界面**：采用响应式设计，支持深色/浅色主题切换，界面美观易用
- **📱 多设备兼容**：完美适配桌面和移动设备，随时随地使用
- **💾 一键导出PDF**：支持将生成的题目一键导出为PDF格式，方便打印和分享
- **🤖 智能桌面助手**：内置交互式AI助手，可解答使用问题、讲解题目、提供学习建议
- **📊 数据可视化**：题目统计和学习进度直观展示
- **⚡ 高性能响应**：优化的缓存机制确保生成题目的高效响应

## 🛠️ 技术架构

### 前端
- **HTML5/CSS3**：构建现代化的用户界面
- **JavaScript (ES6+)**：实现丰富的交互功能
- **SweetAlert2**：提供美观的提示弹窗
- **Chart.js**：数据可视化图表展示
- **Font Awesome**：丰富的图标资源

### 后端
- **Python 3.8+**：核心开发语言
- **Flask**：轻量级Web框架，提供API服务
- **LangChain**：AI应用开发框架，用于构建智能题目生成链
- **智谱AI (GLM-4)**：强大的大语言模型，支持高质量文本生成
- **ReportLab**：PDF文档生成库
- **Flask-Limiter**：API访问限制，防止滥用
- **Flask-CORS**：跨域资源共享支持

## 📋 系统要求

- **操作系统**：Windows 10/11、macOS 10.15+、Ubuntu 20.04+
- **Python**：Python 3.8 或更高版本
- **浏览器**：Chrome 90+、Firefox 90+、Safari 14+、Edge 90+
- **网络**：需要互联网连接以访问智谱AI API
- **API密钥**：需要智谱AI的API密钥 (可从[智谱AI官网](https://open.bigmodel.cn/)获取)

## 🚀 快速开始

### 安装步骤

1. **克隆项目到本地**：
   ```bash
   git clone https://github.com/yourusername/question-generator.git
   cd question-generator
   ```

2. **配置API密钥**：
   在`backend`目录下创建`.env`文件并添加智谱AI API密钥：
   ```
   ZHIPUAI_API_KEY=your_api_key_here
   ```
   
   > 注：项目中的API密钥仅用于测试，请替换为您自己的密钥

3. **运行启动脚本**：
   
   Windows环境：
   ```bash
   start.bat
   ```
   
   Linux/Mac环境：
   ```bash
   chmod +x start.sh
   ./start.sh
   ```

4. **访问系统**：
   打开浏览器，访问 [http://localhost:5000](http://localhost:5000)

### 使用指南

1. **生成题目**：
   - 从下拉菜单选择`年级`（1-6年级）
   - 选择`学科`（数学、英语、科学）
   - 设置`难度级别`（简单、中等、困难）
   - 选择`题目类型`（选择题、判断题、简答题）
   - 输入`题目数量`（1-50之间）
   - 点击`生成题目`按钮

2. **查看题目**：
   - 生成后的题目将在页面下方显示
   - 选择题可以点击选项查看答案和解析
   - 使用桌面宠物助手可以获取题目解析和帮助

3. **导出题目**：
   - 生成题目后，点击`导出PDF`按钮
   - 系统会自动生成包含题目、答案和解析的PDF文档
   - 使用浏览器下载功能保存PDF文件

4. **使用AI助手**：
   - 点击屏幕右下角的桌面宠物图标
   - 在对话框中输入问题或指令
   - 助手可以解释特定题目、提供学习建议或回答使用问题

## 📂 项目结构

```
project/
├── backend/                     # 后端代码目录
│   ├── app.py                   # Flask应用主文件
│   ├── ai_service.py            # AI服务实现
│   ├── pdf_generator.py         # PDF生成服务
│   ├── check_dependencies.py    # 依赖检查脚本
│   ├── requirements.txt         # Python依赖列表
│   ├── .env                     # 环境变量配置(需创建)
│   ├── pdfs/                    # PDF输出目录
│   └── question_bank/           # 题目缓存目录
├── frontend/                    # 前端代码目录
│   ├── home.html                # 主页面HTML
│   ├── js/                      # JavaScript脚本目录
│   │   ├── main.js              # 主要业务逻辑
│   │   └── init.js              # 初始化脚本
│   └── assets/                  # 静态资源(图片、图标等)
├── start.bat                    # Windows启动脚本
└── start.sh                     # Linux/Mac启动脚本(需创建)
```

## 📡 API接口说明

系统提供以下RESTful API接口：

### 1. 生成题目
- **端点**：`/api/generate`
- **方法**：POST
- **描述**：根据指定参数生成题目
- **参数**：
  ```json
  {
    "grade": "年级(1-6)",
    "subject": "学科(Math, English, Science)",
    "difficulty": "难度(Easy, Medium, Hard)",
    "questionType": "题型(Multiple Choice, True/False, Short Answer)",
    "questionCount": "题目数量(1-50)"
  }
  ```
- **返回**：生成的题目及元数据

### 2. 导出PDF
- **端点**：`/api/export-pdf`
- **方法**：POST
- **描述**：将题目导出为PDF格式
- **参数**：
  ```json
  {
    "questions": "题目数组"
  }
  ```
- **返回**：PDF文件下载链接

### 3. AI聊天
- **端点**：`/api/chat`
- **方法**：POST
- **描述**：与AI助手进行对话
- **参数**：
  ```json
  {
    "message": "用户消息"
  }
  ```
- **返回**：AI助手的回复

### 4. 分析答案
- **端点**：`/api/analyze-answer`
- **方法**：POST
- **描述**：分析学生的答案并提供反馈
- **参数**：
  ```json
  {
    "question": "题目内容",
    "answer": "学生答案"
  }
  ```
- **返回**：答案分析和改进建议

## 🔍 高级功能

### 题目互动
- 选择题支持点击选项获取即时反馈
- 桌宠会告知答案正确与否，并提供解析

### 主题切换
- 页面顶部提供深色/浅色主题切换功能
- 系统会记住用户的主题偏好

### 数据可视化
- 生成题目后，系统会展示题目难度分布图表
- 帮助用户直观了解题目分布情况

### 数据持久化
- 生成的题目会保存在本地存储中
- 刷新页面后仍可导出之前生成的题目

### 桌面宠物助手
- 提供题目内容和解析的详细解读
- 能够回答关于学科知识的问题
- 提供个性化学习建议

## ❓ 常见问题解答

1. **Q: 系统启动时报错，无法找到模块？**
   
   A: 请确保已经正确安装所有依赖，可以手动运行以下命令：
   ```bash
   pip install -r backend/requirements.txt
   ```

2. **Q: 生成题目时出现"API密钥错误"？**
   
   A: 请检查`.env`文件中的智谱AI API密钥是否正确配置，密钥格式应为`ZHIPUAI_API_KEY=您的密钥`。

3. **Q: 题目生成速度较慢？**
   
   A: 题目生成依赖智谱AI服务的响应速度，通常需要5-15秒。系统已实现缓存机制，相同参数的再次请求会更快。

4. **Q: PDF导出失败？**
   
   A: 请检查系统权限和磁盘空间，同时确保`backend/pdfs`目录存在且可写入。

5. **Q: 如何增加更多题型或学科？**
   
   A: 可以修改`frontend/home.html`中的相应选项，并在`ai_service.py`中更新提示模板以支持新的题型或学科。

## 🔒 安全注意事项

- **API密钥保护**：`.env`文件包含敏感信息，不要将其提交到版本控制系统
- **限流保护**：系统已实现API限流，防止资源滥用
- **输入验证**：所有用户输入均经过验证，防止注入攻击
- **HTTPS建议**：在生产环境中，建议启用HTTPS以保护数据传输安全
- **依赖更新**：定期更新依赖包以修复安全漏洞

## 🔄 后续开发计划

- [ ] **题库管理**：添加题目保存、分类和检索功能
- [ ] **用户系统**：实现用户注册、登录和权限管理
- [ ] **智能推荐**：基于用户历史记录推荐适合的题目
- [ ] **错题集**：自动收集用户错题，形成个性化练习
- [ ] **批量导入/导出**：支持批量导入和导出多种格式
- [ ] **移动应用**：开发配套的移动应用，提升使用体验
- [ ] **多语言支持**：添加英文、日文等多语言界面
- [ ] **教师功能**：添加试卷组卷和学生管理功能

## 🤝 参与贡献

我们欢迎各种形式的贡献，无论是新功能、文档改进还是问题报告：

1. Fork 本项目仓库
2. 创建你的特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交你的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 创建一个 Pull Request

## 📄 许可证

本项目遵循 MIT 许可证协议 - 详情请参阅 [LICENSE](LICENSE) 文件

## 📞 联系方式

如有任何问题或建议，请通过以下方式联系我们：

- 项目维护者：[您的姓名](mailto:your.email@example.com)
- 项目主页：[GitHub项目地址](https://github.com/yourusername/question-generator)

---

**感谢使用个性化题目生成系统！** 